---
alwaysApply: true
---

# 修正指示時の方針提示ルール

## 基本原則

ユーザーから修正指示を受けた場合、以下の手順を必ず実行してください：

### 1. 現状分析
- 現在のコードの動作を確認
- 問題点や課題を特定
- 関連するファイルやコンポーネントを調査

### 2. 方針提示
修正を実行する前に、以下の内容を含む方針を必ず提示してください：

#### A. 修正内容の整理
- 何を修正するか
- なぜその修正が必要か
- 修正の範囲と影響

#### B. 実装方針
- 具体的な修正手順
- 使用する技術やアプローチ
- 考慮すべき制約や前提条件

#### C. 代替案の検討
- 複数の実装方法がある場合は選択肢を提示
- 各選択肢のメリット・デメリット
- 推奨案とその理由

#### D. 影響範囲の確認
- 修正による影響を受けるファイル
- 既存機能への影響
- テストが必要な箇所

### 3. 承認後の実装（必須）
**絶対にスキップしてはいけない手順**：
- ユーザーの承認を得てから実装を開始
- 実装中は進捗を報告
- 完了後は結果を確認

**承認の確認方法**：
- 「この方針で実装を進めてよろしいでしょうか？」という質問を必ず含める
- ユーザーが「はい」「進めて」「実行して」など明確に承認するまで待つ
- 「了解」「OK」などの曖昧な返答の場合は、明確な承認を求める

## 例外事項（極めて限定的）

以下の場合は方針提示を省略しても構いません：
- ユーザーが明示的に「方針は不要」「即座に実行して」と言った場合

**重要**: 以下の場合は必ず方針提示を行う：
- タイポ修正であっても、複数ファイルに影響する場合
- 明らかに軽微な修正であっても、ロジック変更を伴う場合
- 緊急性が高くても、データベースや本番環境に影響する場合
- 単一ファイルの修正であっても、機能に影響する場合
- ファイルの作成・編集・削除を伴う変更
- データベーススキーマの変更
- APIエンドポイントの変更
- コンポーネントの修正・追加・削除
- 設定ファイルの変更
- 依存関係の追加・削除・更新
- ルーティングの変更
- 認証・認可ロジックの変更
- データ処理ロジックの変更
- UI/UXの変更

## 方針提示のテンプレート

```
## 修正方針

### 現状分析
- [現在の状況を説明]

### 修正内容
- [何を修正するか]
- [修正の理由]

### 実装方針
- [具体的な手順]
- [使用する技術・アプローチ]

### 代替案（該当する場合）
- [選択肢1]: [説明]
- [選択肢2]: [説明]
- **推奨**: [推奨案と理由]

### 影響範囲
- [影響を受けるファイル]
- [既存機能への影響]

この方針で実装を進めてよろしいでしょうか？
```